From 2ab93d7aa2f770a95ae1da3dee6bfc556b50f4d6 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Thu, 21 Jul 2022 13:09:53 +0800
Subject: [PATCH] Aptiv: enable CAN0_STB and CAN0_EN pullup

This patch is based on the file 0001-enable-CAN0_STB-pullup.patch
at layer meta-aptiv/recipes-aptiv/linux-s32/files/.

Upstream-Status: Pending

Signed-off-by: Olaf Benninghaus <olaf.benninghaus@aptiv.com>
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
[Quanyang: add pull-up of GPIO9 for CAN0_EN.]
---
 arch/arm64/boot/dts/freescale/s32g274a-aptiv.dts | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/s32g274a-aptiv.dts b/arch/arm64/boot/dts/freescale/s32g274a-aptiv.dts
index 1c0c8c0d801bb..5832bb5127d7d 100755
--- a/arch/arm64/boot/dts/freescale/s32g274a-aptiv.dts
+++ b/arch/arm64/boot/dts/freescale/s32g274a-aptiv.dts
@@ -170,6 +170,18 @@ can0_grp1 {
 		can0_grp2 {
 			pinmux = <S32CC_PINMUX(513, FUNC2)>;
 		};
+
+		can0_stb_grp0 {
+			pinmux = <S32CC_PINMUX(10, FUNC0)>;
+			bias-pull-up;
+			slew-rate = <S32CC_SLEW_208MHZ>;
+		};
+
+		can0_en_grp0 {
+			pinmux = <S32CC_PINMUX(9, FUNC0)>;
+			bias-pull-up;
+			slew-rate = <S32CC_SLEW_208MHZ>;
+		};
 	};
 
 	can1_pins: can1 {
-- 
2.36.1

